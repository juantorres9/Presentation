LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.numeric_std.all;


ENTITY additioneur3 IS
GENERIC(
N: INTEGER:=3
);
PORT(
--ENTREES
A: IN STD_LOGIC_VECTOR(N-1 DOWNTO 0);--ASSIGNATION X3 SWITCH A
B: IN STD_LOGIC_VECTOR(N-1 DOWNTO 0);--ASSIGNATION X3 SWITCH B
Rin: IN STD_LOGIC;
CLK: IN STD_LOGIC;
CLK2: IN STD_LOGIC;

oHEX0_D: OUT STD_LOGIC_VECTOR(6 DOWNTO 0);--LEDS 7 segments
--SORTIES
S: OUT STD_LOGIC_VECTOR(N-1 DOWNTO 0);
Rout:OUT STD_LOGIC
);
END additioneur3;

ARCHITECTURE arch2 OF additioneur3 IS 
SIGNAL TOTAL : STD_LOGIC_VECTOR(N DOWNTO 0);--SIGNAL QUI STOCKE LE RESULTAT AVEC DEPASSEMENT EN BIT 9

--COMPONENT
COMPONENT AFFICHEUR IS
PORT (
SW: IN STD_LOGIC_VECTOR( 3 downto 0);-- SWITCH physique de 0000 ï¿½ 1111
HEX: OUT STD_LOGIC_VECTOR( 6 DOWNTO 0) -- sorties physique vers les afficheurs
);
END COMPONENT;

BEGIN
PROCESS
VARIABLE RinS:   STD_LOGIC_VECTOR(0 DOWNTO 0);
BEGIN
WAIT UNTIL CLK ='1';
RinS(0):=Rin;
TOTAL <=STD_LOGIC_VECTOR(UNSIGNED('0'&A)+UNSIGNED(B)+UNSIGNED(RinS));
END PROCESS;
S<=TOTAL(N-1 DOWNTO 0);
Rout<=TOTAL(N);

instance1:afficheur PORT MAP(SW=> STD_LOGIC_VECTOR(TOTAL),HEX=>oHEX0_D);
END arch2;
